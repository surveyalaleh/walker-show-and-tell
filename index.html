<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Show & Tell Surveys</title>

  <style>
    body {
      margin: 0;
      background: #f8f6f2;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .screen {
      width: 100%;
      height: 100%;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      padding: 20px;
      box-sizing: border-box;
      text-align: center;
    }

    .screen.active {
      display: flex;
    }

    .tile-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 24px;
      max-width: 960px;
      width: 100%;
    }

    .tile {
      max-width: 360px;
      width: 100%;
    }

    .tile img {
      width: 100%;
      height: auto;
      border-radius: 20px;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
    }

    .button {
      background: #e2ded6;
      padding: 16px 32px;
      border-radius: 18px;
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      user-select: none;
      -webkit-user-select: none;
      border: none;
    }

    .button:active {
      background: #d5d1c9;
    }

    .survey-frame-wrapper {
      width: 100%;
      max-width: 900px;
      height: 75vh;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      padding: 10px;
      box-sizing: border-box;
    }

    iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 12px;
      background: #ffffff;
    }

    @media (max-width: 600px) {
      .survey-frame-wrapper {
        height: 70vh;
      }
    }
  </style>
</head>

<body>

  <!-- SCREEN 1: Language selection -->
  <div id="screen-lang" class="screen active">
    <div class="tile-grid">
      <div class="tile">
        <img src="enstart.png" alt="English survey" id="langEn">
      </div>
      <div class="tile">
        <img src="spstart.png" alt="Spanish survey" id="langSp">
      </div>
      <div class="tile">
        <img src="smstart.png" alt="Somali survey" id="langSm">
      </div>
      <div class="tile">
        <img src="hmnstart.png" alt="Hmong survey" id="langHmn">
      </div>
    </div>
  </div>

  <!-- SCREEN 2: Adult/Kids choice for selected language -->
  <div id="screen-choice" class="screen">
    <div class="tile-grid">
      <div class="tile">
        <img src="enadult.png" alt="Adult survey" id="adultTile">
      </div>
      <div class="tile">
        <img src="enkids.png" alt="Kids survey" id="kidsTile">
      </div>
    </div>

    <button class="button" id="backToLang" style="margin-top: 30px;">← Back to language</button>
  </div>

  <!-- SCREEN 3: Survey iframe -->
  <div id="screen-survey" class="screen">
    <div class="survey-frame-wrapper">
      <iframe id="surveyFrame" title="Show & Tell survey"></iframe>
    </div>

    <div style="display:flex; gap:20px; margin-top:20px;">
      <button class="button" id="backToChoice">← Back</button>
      <button class="button" id="startOver">Start over</button>
    </div>
  </div>

  <script>
    const screenLang    = document.getElementById('screen-lang');
    const screenChoice  = document.getElementById('screen-choice');
    const screenSurvey  = document.getElementById('screen-survey');

    const langEn        = document.getElementById('langEn');
    const langSp        = document.getElementById('langSp');
    const langSm        = document.getElementById('langSm');
    const langHmn       = document.getElementById('langHmn');

    const adultTile     = document.getElementById('adultTile');
    const kidsTile      = document.getElementById('kidsTile');

    const backToLangBtn   = document.getElementById('backToLang');
    const backToChoiceBtn = document.getElementById('backToChoice');
    const startOverBtn    = document.getElementById('startOver');
    const surveyFrame     = document.getElementById('surveyFrame');

    // Map language → images + survey pages
    const LANG_CONFIG = {
      en: {
        adultImg: 'enadult.png',
        kidsImg:  'enkids.png',
        adultPage: 'adult-en.html',
        kidsPage:  'kids-en.html'
      },
      sp: {
        adultImg: 'spadult.png',
        kidsImg:  'spkids.png',
        adultPage: 'adult-sp.html',
        kidsPage:  'kids-sp.html'
      },
      sm: {
        adultImg: 'smadult.png',
        kidsImg:  'smkids.png',
        adultPage: 'adult-sm.html',
        kidsPage:  'kids-sm.html'
      },
      hmn: {
        adultImg: 'hmnadult.png',
        kidsImg:  'hmnkids.png',
        adultPage: 'adult-hmn.html',
        kidsPage:  'kids-hmn.html'
      }
    };

    let currentLang = null;

    function showScreen(screen) {
      [screenLang, screenChoice, screenSurvey].forEach(s => s.classList.remove('active'));
      screen.classList.add('active');
    }

    function selectLanguage(langKey) {
      currentLang = langKey;
      const cfg = LANG_CONFIG[langKey];

      // Update adult/kids images for this language
      adultTile.src = cfg.adultImg;
      kidsTile.src  = cfg.kidsImg;

      showScreen(screenChoice);
      window.scrollTo(0, 0);
    }

    // Language tile clicks
    langEn.addEventListener('click', () => selectLanguage('en'));
    langSp.addEventListener('click', () => selectLanguage('sp'));
    langSm.addEventListener('click', () => selectLanguage('sm'));
    langHmn.addEventListener('click', () => selectLanguage('hmn'));

    // Adult/Kids tile clicks → load correct survey page in iframe
    adultTile.addEventListener('click', () => {
      if (!currentLang) return;
      surveyFrame.src = LANG_CONFIG[currentLang].adultPage;
      showScreen(screenSurvey);
      window.scrollTo(0, 0);
    });

    kidsTile.addEventListener('click', () => {
      if (!currentLang) return;
      surveyFrame.src = LANG_CONFIG[currentLang].kidsPage;
      showScreen(screenSurvey);
      window.scrollTo(0, 0);
    });

    // Back to language selection
    backToLangBtn.addEventListener('click', () => {
      showScreen(screenLang);
      window.scrollTo(0, 0);
    });

    // Back from survey → language-specific Adult/Kids choice
    backToChoiceBtn.addEventListener('click', () => {
      showScreen(screenChoice);
      window.scrollTo(0, 0);
    });

    // Start over → reset everything
    startOverBtn.addEventListener('click', () => {
      surveyFrame.src = '';
      currentLang = null;
      showScreen(screenLang);
      window.scrollTo(0, 0);
    });
  </script>

</body>
</html>
